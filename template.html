<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mah√© <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
  <script src="js/web-animations.js"></script>
      
  <style>
    .letterbox {
      width: 100px;
      height: 100px;
      margin: 0;

      font-size: 95px;
      font-weight: bold;
      text-align: center;
      display: block;
      border: 10px solid black;

      background-color: white;
      color: black;

      float: left;
    }

    .right-arrow {
      width: 374px;
      height: 120px;
      padding: 0;
      margin: 0 20px;

      display: block;

      background: url("images/right-arrow.svg");
      background-size: 374px 120px;

      float: left;
    }
  </style>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/chrome-logo-128.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Animations on the web</h2>
      <h3>CSS Transitions</h3>
    </hgroup>
    <article>
      <ul>
        <li>Simple way to change property values smoothly</li>
      </ul>
      <pre class="prettyprint" data-lang="CSS">
.button { background-color: darkblue; transition: background-color 1s; }
.button:hover { background-color: deepskyblue; }</pre>
      <style>
        .button {
          width: 200px;
          border-radius: 20px;

          padding: 10px;
          text-align: center;

          background-color: darkblue;
          color: #fff;
        }

        .transition-button {
          transition: background-color 1s;
        }

        .transition-button:hover {
          background-color: deepskyblue;
        }
      </style>

      <div class="button transition-button">
        Button
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Animations on the web</h2>
      <h3>CSS Animations</h3>
    </hgroup>
    <article>
      <ul>
        <li>A more powerful way to specify transitions between values, using keyframes</li>
      </ul>
      <pre class="prettyprint" data-lang="CSS">
.button { background-color: darkblue; }
.button:hover { animation: pulsate 1s infinite alternate; }
@keyframes pulsate {
  0% { background-color: darkblue; }
  100% { background-color: deepskyblue; }
}</pre>
      <style>
        .css-button:hover {
          animation: pulsate 1s infinite alternate;
          -webkit-animation: pulsate 1s infinite alternate;
        }
        @keyframes pulsate {
          0% { background-color: darkblue; }
          100% { background-color: deepskyblue; }
        }
        @-webkit-keyframes pulsate {
          0% { background-color: darkblue; }
          100% { background-color: deepskyblue; }
        }
      </style>
      <div class="button css-button">
        Button
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Web Animations</h2>
    </hgroup>
    <article>
      <ul>
        <li>A powerful JavaScript API for coordinating animations</li>
        <li>A base upon which CSS and SVG animations can be implemented</li>
      </ul>
      <pre class="prettyprint" data-lang="JavaScript">
element.animate([
  {backgroundColor: 'darkblue'},
  {backgroundColor: 'deepskyblue'},
  {backgroundColor: 'darkblue'}
], {duration: 1000});</pre>
    <div class="button" id="webButton">
      Button
    </div>
    <script>
      webButton.onmousedown = function() {
        webButton.animate([
          {backgroundColor: 'darkblue'},
          {backgroundColor: 'deepskyblue'},
          {backgroundColor: 'darkblue'},
        ], {duration: 1000});
      };
    </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '100px'},
  {left: '500px'},
  {left: '100px'}
], 1000);
&lt;/script&gt;</pre>
      <style>
        .box-container {
          position: relative;
          width: 100%;
          height: 130px;
          background: url("images/box-lines.png") #eee;
          border: 1px solid black;
        }

        .box {
          width: 100px;
          height: 100px;
          margin-top: 30px;
          background-color: deepskyblue;

          position: absolute;
          left: 100px;
        }

        #box2, #box3 {
          left: 200px;
        }

        #box8, #box9, #box10A, #box10B, #box10C {
          left: 0px;
        }

        #box11 {
          left: 150px;
        }

        .box-slider {
          width: 900px;
          left: 50px;
          position: relative;
        }
      </style>
      <div class="box-container">
        <div class="box" id="box1"></div>
      </div>
      <input type="range" class="box-slider" id="box1Slider" min="0" max="1000" value="0">
      <script>
        var anim1 = box1.animate([{left: '100px'}, {left: '500px'}, {left: '100px' }], {duration: 1000});
        anim1.pause();
        anim1.currentTime = 0;

        box1.onmousedown = function() {
          anim1.play();
        }

        box1Slider.oninput = function() {
          anim1.pause();
          anim1.currentTime = box1Slider.value;
        }
      </script>
    </article>
  </slide>
  
  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 200px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '200px'},
  {left: '600px'},
  {left: '200px'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box2"></div>
      </div>
      <input type="range" class="box-slider" id="box2Slider" min="0" max="1000" value="0">
      <script>
        var anim2 = box2.animate([{left: '200px'}, {left: '600px'}, {left: '200px' }], {duration: 1000});
        anim2.pause();
        anim2.currentTime = 0;

        box2.onmousedown = function() {
          anim2.play();
        }

        box2Slider.oninput = function() {
          anim2.pause();
          anim2.currentTime = box2Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 200px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'add'},
  {left: '400px', composite: 'add'},
  {left: '0px', composite: 'add'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box3"></div>
      </div>
      <input type="range" class="box-slider" id="box3Slider" min="0" max="1000" value="0">
      <script>
        var anim3 = box3.animate([{left: '0px', composite: 'add'}, {left: '400px', composite: 'add'}, {left: '0px', composite: 'add'}], {duration: 1000});
        anim3.pause();
        anim3.currentTime = 0;

        box3.onmousedown = function() {
          anim3.play();
        }

        box3Slider.oninput = function() {
          anim3.pause();
          anim3.currentTime = box3Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Responding to changes</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: <span id="box4Value">100</span>px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '-50px', composite: 'add'},
  {left: '50px', composite: 'add'}
], {duration: 500, iterations: Infinity, direction: 'alternate',
    easing: 'ease-in-out'});
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box4">
        </div>
      </div>
      <input type="range" class="box-slider" id="box4Slider" min="0" max="900" value="100">
      <script>
        box4.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'}
        ], {duration: 500, iterations: Infinity, direction: 'alternate', easing: 'ease-in-out'});

        box4Slider.oninput = function() {
          box4.style.left = box4Slider.value + 'px';
          box4Value.innerText = box4Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Stacking animations</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 0px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'replace'},
  {left: '800px', composite: 'replace'},
], 5000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box8">
        </div>
      </div>
      <script>
        box8.onmousedown = function() {
          box8.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], 5000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Stacking animations</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 0px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '-50px', composite: 'add'},
  {left: '50px', composite: 'add'},
], {duration: 500, iterations: 10, direction: 'alternate',
    easing: 'ease-in-out'});
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box9">
        </div>
      </div>
      <script>
        box9.onmousedown = function() {
          box9.animate([
            {left: '-50px', composite: 'add'},
            {left: '50px', composite: 'add'},
          ], {duration: 500, iterations: 10, direction: 'alternate', easing: 'ease-in-out'});
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Stacking animations</h3>
    </hgroup>
    <article>
      <style>
        .three-box-container {
          text-align: center;
          font-size: 50px;
          font-weight: bold;
        }
      </style>

      <div class="three-box-container">
        <div class="box-container">
          <div class="box" id="box10A">
          </div>
        </div>
        +
        <div class="box-container">
          <div class="box" id="box10B">
          </div>
        </div>
        =
        <div class="box-container">
          <div class="box" id="box10C">
          </div>
        </div>
      </div>
      <script>
        box10A.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], {duration: 5000, iterations: Infinity});
        box10C.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], {duration: 5000, iterations: Infinity});

        box10B.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 500, iterations: 10, direction: 'alternate', easing: 'ease-in-out', iterations: Infinity});
        box10C.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 500, iterations: 10, direction: 'alternate', easing: 'ease-in-out', iterations: Infinity});
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="JavaScript">
// Note that composite: 'replace' is implicit
box.animate([{left: '100px'}, {left: '200px'}], 1000);</pre>
      <ul>
        <li>Each property in each pair of keyframes is represented by an <code>Interpolation</code></li>
        <li>
          <code>Interpolation</code>s go through 3 stages:
          <ul>
            <li>Creation</li>
            <li>Sampling</li>
            <li>Application</li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
      <h3>Creation</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="JavaScript">
box.animate([{left: '100px'}, {left: '200px'}], 1000);
box.animate([{left: '0px'}, {left: '300px'}], 1000);</pre>
      <ul>
        <li>
          An <code>Interpolation</code> is generated for each property in each pair of keyframes
          <ul>
            <li>The subclass of <code>Interpolation</code> that's used is dependent on the types of the values (here, it's <code>LengthStyleInterpolation</code>)</li>
            <li>The from and to <code>CSSValue</code>s are converted into <code>InterpolableValue</code>s, a minimal representation that we can easily perform calculations on</li>
            <li>Can be reused every time the animation is rendered</li>
          </ul>
        </li>
      </ul>

      <style>
        .pipeline-container {
          text-align: center;
          padding-bottom: 10px;
        }
      </style>
      <div class="pipeline-container">
        <img src="images/pipeline-old-1.svg" width="250px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
      <h3>Sampling</h3>
    </hgroup>
    <article>
      <ul>
        <li>A mapping from each property to a single <code>Interpolation</code> (the most recent one) is created</li>
        <li>The timing fraction is calculated based on the current time</li>
        <li>The result of interpolation is calculated and stored as an <code>InterpolableValue</code></li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-old-2.svg" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
      <h3>Application</h3>
    </hgroup>
    <article>
      <ul>
        <li>The result of interpolation is converted from an <code>InterpolableValue</code> to a <code>CSSValue</code> and applied to the <code>RenderStyle</code>, so the element will be rendered with the new property value</li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-old-3.svg" width="400px">
      </div>
      <div class="box-container">
        <div class="box" id="box11"></div>
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
    </hgroup>
    <article>
      <ul>
        <li>
          Things that need to change:
          <ul>
            <li>Since the effects of multiple animations will be taken into account, we should no longer discard all but the most recent <code>Interpolation</code></li>
            <li><code>InterpolableValue</code>s will need to be added together</li>
            <li>The underlying value will need to be factored in so it can be added to</li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Creation</h3>
    </hgroup>
    <article>
      <pre class="prettyprint">
box.animate([{left: '100px', composite: 'add'}, {left: '200px', composite: 'add'}], 1000);
box.animate([{left: '0px', composite: 'add'}, {left: '300px', composite: 'add'}], 1000);</pre>
      <ul>
        <li>
          <code>Interpolation</code>s are still generated for each property in each pair of keyframes
          <ul>
            <li>The from and to composite modes are stored in the <code>Interpolation</code>
          </ul>
        </li>
      </ul>

      <style>
        .pipeline-container {
          text-align: center;
          padding-bottom: 10px;
        }
      </style>
      <div class="pipeline-container">
        <img src="images/pipeline-new-1.svg" width="350px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Sampling</h3>
    </hgroup>
    <article>
      <ul>
        <li>
          A mapping from each property to a list of <code>Interpolation</code>s is created
          <ul>
            <li>This forms the basis of a pipeline, preserving the order in which the <code>Interpolation</code>s will be evaluated and their values accumulated</li>
          </ul>
        </li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-new-2.svg" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Application</h3>
    </hgroup>
    <article>
      <ul>
        <li>If the first interpolation is additive, 
      </ul>
    </article>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/chrome-logo-128.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>Thanks!</h2>
      <p>hi tim</p>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide class="backdrop"></slide>


  <!--
  <slide>
    <hgroup>
      <h2>Under the hood</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px'},
  {left: '600px'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>The 'timing fraction' runs from 0 to 1 over the course of the animation</li>
        <li>Every frame, <code>left</code> is set to [400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box4">
        </div>
      </div>
      <input type="range" id="slider4">
      <script>
        box4.onmousedown = function() {
          box4.animate([{left: '400px'}, {left: '600px'}], 2000);
        }

        var anim4 = box4.animate([{left: '400px'}, {left: '600px'}], 2000);
        anim4.pause();
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Under the hood</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px', composite: 'add'},
  {left: '600px', composite: 'add'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>Every frame, <code>left</code> is set to [(100 + 400)(1-t) + (100 + 600)t] px</li>
        <li>Equivalent to [100 + 400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box5">
        </div>
      </div>
      <script>
        box5.onmousedown = function() {
          box5.animate([{left: '400px', composite: 'add'}, {left: '600px', composite: 'add'}], 2000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Mixing add and replace keyframes</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px', composite: 'replace'},
  {left: '600px', composite: 'add'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>Every frame, <code>left</code> is set to [400(1-t) + (100 + 600)t] px</li>
        <li>Equivalent to [100t + 400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box6">
        </div>
      </div>
      <script>
        box6.onmousedown = function() {
          box6.animate([{left: '400px', composite: 'replace'}, {left: '600px', composite: 'add'}], 2000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Mixing add and replace keyframes</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px', composite: 'add'},
  {left: '600px', composite: 'replace'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>Every frame, <code>left</code> is set to [(100 + 400)(1-t) + 600t] px</li>
        <li>Equivalent to [100(1-t) + 400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box7">
        </div>
      </div>
      <script>
        box7.onmousedown = function() {
          box7.animate([{left: '400px', composite: 'add'}, {left: '600px', composite: 'replace'}], 2000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive formulae</h2>
    </hgroup>
    <article>
      <style>
        var {
          font-style: italic;
        }
        strong {
          font-weight: bold;
        }
      </style>
      <ul>
        <li><strong>U</strong>: Underlying value</li>
        <li><strong>A</strong>: From value</li>
        <li><strong>B</strong>: To value</li>
      </ul>
      <table>
        <tr>
          <th>replace &rarr; replace</th>
          <td><strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
        <tr>
          <th>replace &rarr; add</th>
          <td><strong>U</strong>t + <strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
        <tr>
          <th>add &rarr; replace</th>
          <td><strong>U</strong>(1-t) + <strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
        <tr>
          <th>add &rarr; add</th>
          <td><strong>U</strong> + <strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
      </table>
    </article>
  </slide>
-->

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
