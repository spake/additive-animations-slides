<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mah√© <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
  <script src="js/web-animations.js"></script>
  
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
    <aside class="gdbar"><img src="images/chrome-logo-128.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Animations on the web</h2>
      <h3>A long time ago...</h3>
    </hgroup>
    <article>
      <ul>
        <li>CSS values could be changed, but not smoothly</li>
      </ul>
      <pre class="prettyprint" data-lang="CSS">
.button { background-color: darkblue; }
.button:hover { background-color: deepskyblue; }</pre>
      <style>
        .button {
          width: 200px;
          border-radius: 20px;

          padding: 10px;
          text-align: center;

          background-color: darkblue;
          color: #fff;
        }

        .dumb-button:hover {
          background-color: deepskyblue;
        }
      </style>

      <div class="button dumb-button">
        Button
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Animations on the web</h2>
      <h3>CSS Transitions</h3>
    </hgroup>
    <article>
      <ul>
        <li>Simple way to change property values smoothly</li>
      </ul>
      <pre class="prettyprint" data-lang="CSS">
.button { background-color: darkblue; transition: background-color 1s; }
.button:hover { background-color: deepskyblue; }</pre>
      <style>
        .transition-button {
          transition: background-color 1s;
        }

        .transition-button:hover {
          background-color: deepskyblue;
        }
      </style>

      <div class="button transition-button">
        Button
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Animations on the web</h2>
      <h3>CSS Animations</h3>
    </hgroup>
    <article>
      <ul>
        <li>A more powerful way to specify transitions between values, using keyframes</li>
      </ul>
      <pre class="prettyprint" data-lang="CSS">
.button { background-color: darkblue; }
.button:hover { animation: pulsate 1s infinite alternate; }
@keyframes pulsate {
  0% { background-color: darkblue; }
  100% { background-color: deepskyblue; }
}</pre>
      <style>
        .css-button:hover {
          animation: pulsate 1s infinite alternate;
          -webkit-animation: pulsate 1s infinite alternate;
        }
        @keyframes pulsate {
          0% { background-color: darkblue; }
          100% { background-color: deepskyblue; }
        }
        @-webkit-keyframes pulsate {
          0% { background-color: darkblue; }
          100% { background-color: deepskyblue; }
        }
      </style>
      <div class="button css-button">
        Button
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Web Animations</h2>
    </hgroup>
    <article>
      <ul>
        <li>A powerful JavaScript API for coordinating animations</li>
        <li>A base upon which CSS and SVG animations can be implemented</li>
      </ul>
      <pre class="prettyprint" data-lang="JavaScript">
element.animate([
  {backgroundColor: 'darkblue'},
  {backgroundColor: 'deepskyblue'},
  {backgroundColor: 'darkblue'}
], {duration: 1000});</pre>
    <div class="button" id="webButton">
      Button
    </div>
    <script>
      webButton.onmousedown = function() {
        webButton.animate([
          {backgroundColor: 'darkblue'},
          {backgroundColor: 'deepskyblue'},
          {backgroundColor: 'darkblue'},
        ], {duration: 1000});
      };
    </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '100px'},
  {left: '500px'},
  {left: '100px'}
], 1000);
&lt;/script&gt;</pre>
      <style>
        .box-container {
          position: relative;
          width: 100%;
          height: 130px;
          background: url("images/box-lines.png") #eee;
          border: 1px solid black;
        }

        .box {
          width: 100px;
          height: 100px;
          margin-top: 30px;
          background-color: deepskyblue;

          color: white;
          font-size: 50px;
          text-align: center;

          position: absolute;
          left: 100px;
        }

        #box2, #box3 {
          left: 200px;
        }

        #box8, #box9, #box10A, #box10B, #box10C {
          left: 0px;
        }

        #box11 {
          left: 150px;
        }

        .box-slider {
          width: 900px;
          left: 50px;
          position: relative;
        }
      </style>
      <div class="box-container">
        <div class="box" id="box1"></div>
      </div>
      <input type="range" class="box-slider" id="box1Slider" min="0" max="1000" value="0">
      <script>
        var anim1 = box1.animate([{left: '100px'}, {left: '500px'}, {left: '100px' }], {duration: 1000});
        anim1.pause();
        anim1.currentTime = 0;

        box1.onmousedown = function() {
          anim1.play();
        }

        box1Slider.oninput = function() {
          anim1.pause();
          anim1.currentTime = box1Slider.value;
        }
      </script>
    </article>
  </slide>
  
  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 200px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '200px'},
  {left: '600px'},
  {left: '200px'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box2"></div>
      </div>
      <input type="range" class="box-slider" id="box2Slider" min="0" max="1000" value="0">
      <script>
        var anim2 = box2.animate([{left: '200px'}, {left: '600px'}, {left: '200px' }], {duration: 1000});
        anim2.pause();
        anim2.currentTime = 0;

        box2.onmousedown = function() {
          anim2.play();
        }

        box2Slider.oninput = function() {
          anim2.pause();
          anim2.currentTime = box2Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 200px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'add'},
  {left: '400px', composite: 'add'},
  {left: '0px', composite: 'add'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box3"></div>
      </div>
      <input type="range" class="box-slider" id="box3Slider" min="0" max="1000" value="0">
      <script>
        var anim3 = box3.animate([{left: '0px', composite: 'add'}, {left: '400px', composite: 'add'}, {left: '0px', composite: 'add'}], {duration: 1000});
        anim3.pause();
        anim3.currentTime = 0;

        box3.onmousedown = function() {
          anim3.play();
        }

        box3Slider.oninput = function() {
          anim3.pause();
          anim3.currentTime = box3Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>A motivating example</h3>
    </hgroup>
    <article>
      <input type="range" class="box-slider" id="box3BSlider" min="0" max="900" value="100">
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: <span id="box3BValue">100</span>px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'add'},
  {left: '400px', composite: 'add'},
  {left: '0px', composite: 'add'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box3B">
        </div>
      </div>
      <script>
        box3B.onmousedown = function() {
          box3B.animate([{left: '0px', composite: 'add'}, {left: '400px', composite: 'add'}, {left: '0px', composite: 'add'}], {duration: 1000});
        }

        box3BSlider.oninput = function() {
          box3B.style.left = box3BSlider.value + 'px';
          box3BValue.innerText = box3BSlider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Responding to changes</h3>
    </hgroup>
    <article>
      <input type="range" class="box-slider" id="box4Slider" min="0" max="900" value="100">
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: <span id="box4Value">100</span>px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '-50px', composite: 'add'},
  {left: '50px', composite: 'add'}
], {duration: 500, iterations: Infinity, direction: 'alternate',
    easing: 'ease-in-out'});
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box4">
        </div>
      </div>
      <script>
        box4.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'}
        ], {duration: 500, iterations: Infinity, direction: 'alternate', easing: 'ease-in-out'});

        box4Slider.oninput = function() {
          box4.style.left = box4Slider.value + 'px';
          box4Value.innerText = box4Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Mixing add and replace keyframes</h3>
    </hgroup>
    <article>
      <input type="range" class="box-slider" id="box4BSlider" min="0" max="900" value="100">
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: <span id="box4BValue">100</span>px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'add'},
  {left: '800px', composite: 'replace'},
  {left: '0px', composite: 'add'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box4B">
        </div>
      </div>
      <script>
        box4B.onmousedown = function() {
          box4B.animate([
            {left: '0px', composite: 'add'},
            {left: '800px', composite: 'replace'},
            {left: '0px', composite: 'add'}
          ], 1000);
        }

        box4BSlider.oninput = function() {
          box4B.style.left = box4BSlider.value + 'px';
          box4BValue.innerText = box4BSlider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Stacking animations</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 0px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'replace'},
  {left: '800px', composite: 'replace'},
], 5000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box8">
        </div>
      </div>
      <script>
        box8.onmousedown = function() {
          box8.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], 5000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Stacking animations</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 0px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '-50px', composite: 'add'},
  {left: '50px', composite: 'add'},
], {duration: 500, iterations: 10, direction: 'alternate',
    easing: 'ease-in-out'});
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box9">
        </div>
      </div>
      <script>
        box9.onmousedown = function() {
          box9.animate([
            {left: '-50px', composite: 'add'},
            {left: '50px', composite: 'add'},
          ], {duration: 500, iterations: 10, direction: 'alternate', easing: 'ease-in-out'});
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Stacking animations</h3>
    </hgroup>
    <article>
      <style>
        .three-box-container {
          text-align: center;
          font-size: 50px;
          font-weight: bold;
        }
      </style>

      <div class="three-box-container">
        <div class="box-container">
          <div class="box" id="box10A">
          </div>
        </div>
        +
        <div class="box-container">
          <div class="box" id="box10B">
          </div>
        </div>
        =
        <div class="box-container">
          <div class="box" id="box10C">
          </div>
        </div>
      </div>
      <script>
        box10A.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], {duration: 5000, iterations: Infinity});
        box10C.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], {duration: 5000, iterations: Infinity});

        box10B.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 500, direction: 'alternate', easing: 'ease-in-out', iterations: Infinity});
        box10C.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 500, direction: 'alternate', easing: 'ease-in-out', iterations: Infinity});
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Demo</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 400px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '-200px', composite: 'add'},
  {left: '200px', composite: 'add'},
], {duration: 3000, iterations: Infinity, direction: 'alternate',
    easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
&lt;/script&gt;</pre>
      <style>
        #box100 {
          left: 400px;
        }
      </style>
      <div class="box-container">
        <div class="box" id="box100">
        </div>
      </div>
      <script>
        box100.animate([
          {left: '-200px', composite: 'add'},
          {left: '200px', composite: 'add'},
        ], {duration: 3000, iterations: Infinity, direction: 'alternate', easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Demo</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 400px; top: -200px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '-200px', composite: 'add'},
  {left: '200px', composite: 'add'},
], {duration: 3000, iterations: Infinity, direction: 'alternate',
    easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
box.animate([
  {top: '-200px', composite: 'add'},
  {top: '200px', composite: 'add'},
], {duration: 3000, iterations: Infinity, direction: 'alternate', delay: -1500,
    easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
&lt;/script&gt;</pre>
      <style>
        #box101 {
          left: 400px;
          top: -200px;
        }
      </style>
      <div class="box-container">
        <div class="box" id="box101">
        </div>
      </div>
      <script>
        box101.animate([
          {left: '-200px', composite: 'add'},
          {left: '200px', composite: 'add'},
        ], {duration: 3000, iterations: Infinity, direction: 'alternate', easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
        box101.animate([
          {top: '-200px', composite: 'add'},
          {top: '200px', composite: 'add'},
        ], {duration: 3000, iterations: Infinity, direction: 'alternate', delay: -1500,
            easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
      <h3>Demo</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 400px; top: -200px; } &lt;/style&gt;
&lt;script&gt;
...
box.animate([
  {left: '-50px', composite: 'add'},
  {left: '50px', composite: 'add'},
], {duration: 200, iterations: Infinity, direction: 'alternate',
    easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
box.animate([
  {top: '-50px', composite: 'add'},
  {top: '50px', composite: 'add'},
], {duration: 200, iterations: Infinity, direction: 'alternate', delay: -100,
    easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
&lt;/script&gt;</pre>
      <style>
        #box102 {
          left: 400px;
          top: -200px;
        }
      </style>
      <div class="box-container">
        <div class="box" id="box102">
        </div>
      </div>
      <script>
        box102.animate([
          {left: '-200px', composite: 'add'},
          {left: '200px', composite: 'add'},
        ], {duration: 3000, iterations: Infinity, direction: 'alternate', easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
        box102.animate([
          {top: '-200px', composite: 'add'},
          {top: '200px', composite: 'add'},
        ], {duration: 3000, iterations: Infinity, direction: 'alternate', delay: -1500,
            easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});

        box102.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 200, iterations: Infinity, direction: 'alternate', easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
        box102.animate([
          {top: '-50px', composite: 'add'},
          {top: '50px', composite: 'add'},
        ], {duration: 200, iterations: Infinity, direction: 'alternate', delay: -100,
            easing: 'cubic-bezier(0.445, 0.050, 0.550, 0.950)'});
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations</h2>
    </hgroup>
    <article>
      <h1>Orbit demo</h1>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="JavaScript">
// Note that composite: 'replace' is implicit
box.animate([{left: '100px'}, {left: '200px'}], 1000);</pre>
      <ul>
        <li>Each property in each pair of keyframes is represented by an <code>Interpolation</code></li>
        <li>
          <code>Interpolation</code>s go through 3 stages:
          <ul>
            <li>Creation</li>
            <li>Sampling</li>
            <li>Application</li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
      <h3>Creation</h3>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="JavaScript">
box.animate([{left: '100px'}, {left: '200px'}], 1000);
box.animate([{left: '0px'}, {left: '300px'}], 1000);</pre>
      <ul>
        <li>
          An <code>Interpolation</code> is generated for each property in each pair of keyframes
          <ul>
            <li>The subclass of <code>Interpolation</code> that's used is dependent on the types of the values (here, it's <code>LengthStyleInterpolation</code>)</li>
            <li>The from and to <code>CSSValue</code>s are converted into <code>InterpolableValue</code>s, a minimal representation that we can easily perform calculations on</li>
            <li>Can be reused every time the animation is rendered</li>
          </ul>
        </li>
      </ul>

      <style>
        .pipeline-container {
          text-align: center;
          padding-bottom: 10px;
        }
      </style>
      <div class="pipeline-container">
        <img src="images/pipeline-old-1.png" width="250px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
      <h3>Sampling</h3>
    </hgroup>
    <article>
      <ul>
        <li>A mapping from each property to a single <code>Interpolation</code> (the most recent one) is created</li>
        <li>The timing fraction is calculated based on the current time</li>
        <li>The result of interpolation is calculated and stored as an <code>InterpolableValue</code></li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-old-2.png" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Existing Web Animations implementation</h2>
      <h3>Application</h3>
    </hgroup>
    <article>
      <ul>
        <li>The result of interpolation is converted from an <code>InterpolableValue</code> to a <code>CSSValue</code> and applied to the <code>RenderStyle</code>, so the element will be rendered with the new property value</li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-old-3.png" width="400px">
      </div>
      <div class="box-container">
        <div class="box" id="box11"></div>
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
    </hgroup>
    <article>
      <ul>
        <li>
          Things that need to change:
          <ul>
            <li>Since the effects of multiple animations will be taken into account, we should no longer discard all but the most recent <code>Interpolation</code></li>
            <li><code>InterpolableValue</code>s will need to be added together</li>
            <li>The underlying value will need to be factored in so it can be added to</li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Creation</h3>
    </hgroup>
    <article>
      <pre class="prettyprint">
&lt;style&gt; #box { left: '100px'; } &lt;/style&gt;
&lt;script&gt;
box.animate([{left: '100px', composite: 'add'}, {left: '200px', composite: 'add'}], 1000);
box.animate([{left: '0px', composite: 'add'}, {left: '300px', composite: 'add'}], 1000);
&lt;/script&gt;</pre>
      <ul>
        <li>
          <code>Interpolation</code>s are still generated for each property in each pair of keyframes
          <ul>
            <li>The from and to composite modes are stored in the <code>Interpolation</code>
          </ul>
        </li>
      </ul>

      <style>
        .pipeline-container {
          text-align: center;
          padding-top: 10px;
        }
      </style>
      <div class="pipeline-container">
        <img src="images/pipeline-new-1.png" width="300px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Sampling</h3>
    </hgroup>
    <article>
      <ul>
        <li>
          A mapping from each property to a list of <code>InterpolationPipelineStage</code>s is created
          <ul>
            <li>Linked list nodes, each containing an <code>Interpolation</code></li>
            <li>This forms the basis of a pipeline, preserving the order in which the <code>Interpolation</code>s will be evaluated and their values accumulated</li>
          </ul>
        </li>
        <li>An 'underlying fraction' is calculated: how much the previous value will contribute to the pipeline stage's result</li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-new-2.png" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Application</h3>
    </hgroup>
    <article>
      <ul>
        <li>
          If the first interpolation is additive, the underlying value must be added to the pipeline
          <ul>
            <li>The underlying value is pulled from the <code>RenderStyle</code> (as a <code>CSSValue</code>), and a constant <code>Interpolation</code> is created from it</li>
            <li>Since an <code>Interpolation</code> is created from the underlying value, we get the benefits of its representation as an <code>InterpolableValue</code>, such as easy addition</li>
          </ul>
        </li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-new-3.png" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive animations implementation</h2>
      <h3>Application</h3>
    </hgroup>
    <article>
      <ul>
        <li><code>InterpolableValue</code>s are passed from each pipeline stage to the next, and combined according to their underlying fraction</li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-new-4.png" width="400px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive pipeline examples</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([{left: '0px'}, {left: '800px'}], {duration: 5000, iterations: Infinity});
box.animate([
  {left: '-50px', composite: 'add'},
  {left: '50px', composite: 'add'},
], {duration: 500, direction: 'alternate',
    easing: 'ease-in-out', iterations: Infinity});
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box10D">
        </div>
      </div>
      <script>
        box10D.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], {duration: 5000, iterations: Infinity});
        box10D.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 500, direction: 'alternate', easing: 'ease-in-out', iterations: Infinity});
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive pipeline examples</h2>
    </hgroup>
    <article>
      After 2500ms:
      <div class="box-container">
        <div class="box" id="box10E">
        </div>
      </div>
      <script>
        var anim10E_1 = box10E.animate([{left: '0px', composite: 'replace'}, {left: '800px', composite: 'replace'}], {duration: 5000, iterations: Infinity});
        var anim10E_2 = box10E.animate([
          {left: '-50px', composite: 'add'},
          {left: '50px', composite: 'add'},
        ], {duration: 500, direction: 'alternate', easing: 'ease-in-out', iterations: Infinity});

        anim10E_1.pause();
        anim10E_2.pause();
        anim10E_1.currentTime = 2500;
        anim10E_2.currentTime = 2500;
      </script>
      <div class="pipeline-container">
        <img src="images/pipeline-example-1.png" width="400px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive pipeline examples</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '0px', composite: 'add'},
  {left: '800px', composite: 'replace'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box4C">
        </div>
      </div>
      <script>
        box4C.onmousedown = function() {
          box4C.animate([
            {left: '0px', composite: 'add'},
            {left: '800px', composite: 'replace'}
          ], 1000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive pipeline examples</h2>
    </hgroup>
    <article>
      After 250ms:
      <div class="box-container">
        <div class="box" id="box4D">
        </div>
      </div>
      <script>
        var anim4D = box4D.animate([
          {left: '0px', composite: 'add'},
          {left: '800px', composite: 'replace'}
        ], 1000);

        anim4D.pause();
        anim4D.currentTime = 250;
      </script>
      <div class="pipeline-container">
        <img src="images/pipeline-example-2.png" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Challenges</h2>
    </hgroup>
    <article>
      <ul>
        <li>Incompatible values</li>
        <li><code>inherit</code></li>
        <li>Cubic Bezier easing</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Incompatible values</h2>
    </hgroup>
    <article>
      <ul>
        <li>
          Some properties accept several different types of values, and we can't interpolate between them (nor can we add them)
          <ul>
            <li>For example, <code>line-height</code> accepts both lengths and numbers</li>
          </ul>
        </li>
      </ul>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #text { line-height: 2; } &lt;/style&gt;
&lt;script&gt;
text.animate([
  {lineHeight: '30px', composite: 'add'},
  {lineHeight: '40px', composite: 'add'}
], 1000);
&lt;/script&gt;</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Incompatible values</h2>
    </hgroup>
    <article>
      <ul>
        <li>How should we handle such a case?</li>
      </ul>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #text { line-height: 2; } &lt;/style&gt;
&lt;script&gt;
text.animate([
  {lineHeight: '30px', composite: 'add'},
  {lineHeight: '40px', composite: 'add'}
], 1000);
&lt;/script&gt;</pre>
      <div class="pipeline-container">
        <img src="images/pipeline-bad-1.png" width="400px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Incompatible values</h2>
    </hgroup>
    <article>
      <ul>
        <li>We just ignore attempts to add on incompatible values</li>
        <li>This behaviour was decided on through discussions, and isn't actually reflected in the spec yet</li>
      </ul>
      <div class="pipeline-container">
        <img src="images/pipeline-bad-2.png" width="500px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2><code>inherit</code></h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt;
  #parent { line-height: 2; }
  #child { line-height: inherit; }
&lt;/style&gt;
&lt;div id="parent"&gt;
  &lt;div id="child"&gt;
    Hello, World!
  &lt;/div&gt;
&lt;/div&gt;</pre>
      <ul>
        <li>The <code>inherit</code> keyword resolves to the element's parent's value</li>
        <li>The value (and type) of <code>inherit</code> is only known at apply time</li>
        <li>
          The <code>InterpolableValue</code> code path doesn't support <code>inherit</code> yet, so adding with <code>inherit</code> isn't yet possible
          <ul>
            <li>The old code path supports <code>inherit</code> by deferring the creation of 'interpolations' using the keyword until apply time</li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Cubic Bezier easing</h2>
    </hgroup>
    <article>
      <ul>
        <li>Cubic Beziers give you a fine level of control over how values are interpolated between</li>
      </ul>
      <div>
        <pre class="prettyprint" data-lang="HTML" style="width: 80%; float: left">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '100px'},
  {left: '800px'}
], {duration: 1000, easing: 'cubic-bezier(.42, 0, .58, 1)'});
&lt;/script&gt;</pre>
        <img src="images/ease-in-out.png" width="20%; float: right">
        <div style="clear: both"></div>
      </div>

      <div class="box-container">
        <div class="box" id="box12">
        </div>
      </div>
      <input type="range" class="box-slider" id="box12Slider" min="0" max="1000" value="0">
      <script>
        var anim12 = box12.animate([
            {left: '100px'},
            {left: '800px'}
          ], {duration: 1000, easing: 'cubic-bezier(.42, 0, .58, 1)'});

        anim12.pause();
        anim12.currentTime = 0;

        box12.onmousedown = function() {
          anim12.play();
        }

        box12Slider.oninput = function() {
          anim12.pause();
          anim12.currentTime = box12Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Cubic Bezier easing</h2>
    </hgroup>
    <article>
      <ul>
        <li>Cubic Beziers can have 0 or 2 turning points</li>
      </ul>
      <div>
        <pre class="prettyprint" data-lang="HTML" style="width: 80%; float: left">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '100px'},
  {left: '800px'}
], {duration: 1000,
    easing: 'cubic-bezier(.41, 1.94, .72, -0.91)'});
&lt;/script&gt;</pre>
        <img src="images/crazy-bezier.png" width="20%; float: right">
        <div style="clear: both"></div>
      </div>

      <div class="box-container">
        <div class="box" id="box13">
        </div>
      </div>
      <input type="range" class="box-slider" id="box13Slider" min="0" max="1000" value="0">
      <script>
        var anim13 = box13.animate([
            {left: '100px'},
            {left: '800px'}
          ], {duration: 1000, easing: 'cubic-bezier(.41, 1.94, .72, -0.91)'});

        anim13.pause();
        anim13.currentTime = 0;

        box13.onmousedown = function() {
          anim13.play();
        }

        box13Slider.oninput = function() {
          anim13.pause();
          anim13.currentTime = box13Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Interpolating between incompatible values</h2>
    </hgroup>
    <article>
      <ul>
        <li>The defined behaviour is using the first value when t &lt; 0.5, and the second value when t &ge; 0.5</li>
      </ul>

      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '100px', fontFamily: 'Verdana'},
  {left: '800px', fontFamily: 'Courier New'}
], 1000);
&lt;/script&gt;</pre>
      <div class="box-container">
        <div class="box" id="box14">
          hi
        </div>
      </div>
      <input type="range" class="box-slider" id="box14Slider" min="0" max="1000" value="0">
      <script>
        var anim14 = box14.animate([
            {left: '100px', fontFamily: 'Verdana'},
            {left: '800px', fontFamily: 'Courier New'}
          ], {duration: 1000});

        anim14.pause();
        anim14.currentTime = 0;

        box14.onmousedown = function() {
          anim14.play();
        }

        box14Slider.oninput = function() {
          anim14.pause();
          anim14.currentTime = box14Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Cubic Beziers and incompatible values</h2>
    </hgroup>
    <article>
      <ul>
        <li>The first value is used when f(t) &lt; 0.5, and the second value when f(t) &ge; 0.5</li>
        <li>We ideally want to determine the corresponding values of t at creation time</li>
      </ul>

      <div>
        <pre class="prettyprint" data-lang="HTML" style="width: 80%; float: left">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '100px', fontFamily: 'Verdana'},
  {left: '800px', fontFamily: 'Courier New'}
], {duration: 1000,
    easing: 'cubic-bezier(.41, 1.94, .72, -0.91)'});
&lt;/script&gt;</pre>
        <img src="images/crazy-bezier2.png" width="20%; float: right">
        <div style="clear: both"></div>
      </div>
      <div class="box-container">
        <div class="box" id="box15">
          hi
        </div>
      </div>
      <input type="range" class="box-slider" id="box15Slider" min="0" max="1000" value="0">
      <script>
        var anim15 = box15.animate([
            {left: '100px', fontFamily: 'Verdana'},
            {left: '800px', fontFamily: 'Courier New'}
          ], {duration: 1000, easing: 'cubic-bezier(.41, 1.94, .72, -0.91)'});

        anim15.pause();
        anim15.currentTime = 0;

        box15.onmousedown = function() {
          anim15.play();
        }

        box15Slider.oninput = function() {
          anim15.pause();
          anim15.currentTime = box15Slider.value;
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Cubic Beziers and incompatible values</h2>
    </hgroup>
    <article>
      <ul>
        <li>The solution to this problem involved 'partitioning' the Bezier into regions where f(t) &lt; 0.5 and f(t) &ge; 0.5</li>
        <li>At create time, a constant <code>Interpolation</code> is created for each region</li>
        <li>When sampling the animation, the appropriate constant <code>Interpolation</code> is chosen and added to the pipeline, enabling addition</li>
      </ul>
      <div class="pipeline-container">
        <img src="images/crazy-bezier2.png" width="250px">
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Cubic Beziers and incompatible values</h2>
      <h3>Example</h3>
    </hgroup>
    <article>
        <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #element { width: 100px; } &lt;/style&gt;
&lt;script&gt;
element.animate([
  {width: 'auto', composite: 'add'},
  {width: '50px', composite: 'add'}
], {duration: 1000,
    easing: 'cubic-bezier(.41, 1.94, .72, -0.91)'});
&lt;/script&gt;</pre>
      <div class="pipeline-container">
        <img src="images/pipeline-auto-1.png" width="350px" style="float: left">
        <img src="images/pipeline-auto-2.png" width="350px" style="float: right">
        <div style="clear: both"></div>
      </div>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Status of additive animations</h2>
    </hgroup>
    <article>
      <ul>
        <li>
          CLs landed
          <ul>
            <li>Support for adding and multiplying <code>InterpolableValue</code>s</li>
            <li>Refactoring of <code>Interpolation</code> creation for partitioning</li>
            <li>Implementation of cubic Bezier and step timing function partitioning (behind flag)</li>
            <li>Removal of partitioning flag</li>
          </ul>
        </li>
        <li>
          CLs up for review
          <ul>
            <li>Additive animations for lengths</li>
          </ul>
        </li>
        <li>
          What's next
          <ul>
            <li>Implement additive animations for other types</li>
            <li>Benchmarking</li>
            <li>Ship additive animations support</li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/chrome-logo-128.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>Thanks!</h2>
      <p>hi tim</p>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide class="backdrop"></slide>


  <!--
  <slide>
    <hgroup>
      <h2>Under the hood</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px'},
  {left: '600px'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>The 'timing fraction' runs from 0 to 1 over the course of the animation</li>
        <li>Every frame, <code>left</code> is set to [400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box4">
        </div>
      </div>
      <input type="range" id="slider4">
      <script>
        box4.onmousedown = function() {
          box4.animate([{left: '400px'}, {left: '600px'}], 2000);
        }

        var anim4 = box4.animate([{left: '400px'}, {left: '600px'}], 2000);
        anim4.pause();
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Under the hood</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px', composite: 'add'},
  {left: '600px', composite: 'add'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>Every frame, <code>left</code> is set to [(100 + 400)(1-t) + (100 + 600)t] px</li>
        <li>Equivalent to [100 + 400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box5">
        </div>
      </div>
      <script>
        box5.onmousedown = function() {
          box5.animate([{left: '400px', composite: 'add'}, {left: '600px', composite: 'add'}], 2000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Mixing add and replace keyframes</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px', composite: 'replace'},
  {left: '600px', composite: 'add'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>Every frame, <code>left</code> is set to [400(1-t) + (100 + 600)t] px</li>
        <li>Equivalent to [100t + 400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box6">
        </div>
      </div>
      <script>
        box6.onmousedown = function() {
          box6.animate([{left: '400px', composite: 'replace'}, {left: '600px', composite: 'add'}], 2000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Mixing add and replace keyframes</h2>
    </hgroup>
    <article>
      <pre class="prettyprint" data-lang="HTML">
&lt;style&gt; #box { left: 100px; } &lt;/style&gt;
&lt;script&gt;
box.animate([
  {left: '400px', composite: 'add'},
  {left: '600px', composite: 'replace'},
], 2000);
&lt;/script&gt;</pre>
      <ul>
        <li>Every frame, <code>left</code> is set to [(100 + 400)(1-t) + 600t] px</li>
        <li>Equivalent to [100(1-t) + 400(1-t) + 600t] px</li>
      </ul>
      <div class="box-container">
        <div class="box" id="box7">
        </div>
      </div>
      <script>
        box7.onmousedown = function() {
          box7.animate([{left: '400px', composite: 'add'}, {left: '600px', composite: 'replace'}], 2000);
        }
      </script>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Additive formulae</h2>
    </hgroup>
    <article>
      <style>
        var {
          font-style: italic;
        }
        strong {
          font-weight: bold;
        }
      </style>
      <ul>
        <li><strong>U</strong>: Underlying value</li>
        <li><strong>A</strong>: From value</li>
        <li><strong>B</strong>: To value</li>
      </ul>
      <table>
        <tr>
          <th>replace &rarr; replace</th>
          <td><strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
        <tr>
          <th>replace &rarr; add</th>
          <td><strong>U</strong>t + <strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
        <tr>
          <th>add &rarr; replace</th>
          <td><strong>U</strong>(1-t) + <strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
        <tr>
          <th>add &rarr; add</th>
          <td><strong>U</strong> + <strong>A</strong>(1-t) + <strong>B</strong>t</td>
        </tr>
      </table>
    </article>
  </slide>
-->

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
